<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>

		<record model="ir.ui.view" id="product_normal_form_view_inh_many2manyattachments">
			<field name="name">product.normal.form.view.inh.many2manyattachments</field>
			<field name="model">product.product</field>
			<field name="type">form</field>
			<field name="inherit_id" ref="product.product_normal_form_view" />
			<field name="arch" type="xml">	
				<xpath expr="//page[@string='Packaging']" position="after">
	                <page string="Shared Attachments">
	                    <field colspan="4" name="attachment_ids" nolabel="1" />
	                </page>
				</xpath>
			</field>
		</record>
		
	
		<record id="ir_actions_server_action_product_attachment" model="ir.actions.server">
			<field name="type">ir.actions.server</field>
		    <field name="condition">True</field>
		    <field name="state">code</field>
		    <field name="model_id" ref="product.model_product_product"/>
		    <field eval="5" name="sequence"/>
		    <field name="code">
adjuntos_lst = []
product_lst = self.pool.get('product.product').browse(cr,uid,context['active_ids'])
if product_lst:
	for prod in product_lst:
		for adj in prod.attachment_ids:
			if not adj in adjuntos_lst:
				adjuntos_lst.append(adj.id)
action = {
'view_mode':'tree,form',
'view_type':'form',
'type':'ir.actions.act_window',
'domain':[('id','in',adjuntos_lst)],
'target':'current',
'res_model':'ir.attachment',
'nodestroy':True
}
           </field>
           <field name="name">Product attachment shortcut</field>
        </record>

		<record id="ir_show_product_attachment" model="ir.values">
			<field eval="'client_action_multi'" name="key2"/>
			<field eval="'product.product'" name="model"/>
			<field name="name">Show attachments</field>
			<field eval="'ir.actions.server,'+str(ir_actions_server_action_product_attachment)" name="value"/>
			<field eval="True" name="object"/>
		</record>







	</data>
</openerp>