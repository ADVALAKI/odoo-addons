<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>    
    
    		<record model="ir.ui.view" id="config_mrp_final_line_tree_view">
                <field name="name">config.mrp.final.line.tree</field>
                <field name="model">config.mrp.final.line</field>
                <field name="type">tree</field>
                <field name="arch" type="xml">
                    <tree string="Config Lines" editable="bottom">
                        <field name="config_id" invisible="1"/>
                        <field name="product_id"  on_change="onchange_product_id(product_id)"/>
                        <field name="product_qty"/>
                        <field name="product_uom"/>
                        <field name="shape" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="density" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="size_x" attrs="{'required':[('shape', '=', 'quadrangular')]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="size_y" attrs="{'required':[('shape', '=', 'quadrangular')]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="size_z" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="diameter" attrs="{'required':[('shape', '=', 'cylindrical')]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="weight" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                    </tree>
                </field>
            </record>

            <record model="ir.ui.view" id="config_mrp_final_line_form_view">
                <field name="name">config.mrp.final.line.form</field>
                <field name="model">config.mrp.final.line</field>
                <field name="type">form</field>
                <field name="arch" type="xml">
                    <form string="Config Lines">
                    	<group colspan="4" col="12">
                        <field name="config_id" invisible="1"/>
                        <field name="product_id" on_change="onchange_product_id(product_id)"/>
                        <field name="product_qty"/>
                        <field name="product_uom"/>
                        <field name="shape" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="density" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        </group>
                        <group colspan="4" col="10">
                        <field name="size_x" attrs="{'required':[('shape', '=', 'quadrangular')], 'invisible':[('shape', 'in', ('other','cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="size_y" attrs="{'required':[('shape', '=', 'quadrangular')],'invisible':[('shape', 'in', ('other','cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="size_z" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))],'invisible':[('shape', '=', 'other')]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="diameter" attrs="{'required':[('shape', '=', 'cylindrical')],'invisible':[('shape', 'in', ('other','quadrangular'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="weight" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))],'invisible':[('shape', '=', 'other')]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        </group>
                    </form>
                </field>
            </record>

            <record model="ir.actions.act_window" id="action_config_mrp_final_line_tree_view">
                <field name="name">config.mrp.final.line</field>
                <field name="type">ir.actions.act_window</field>
                <field name="res_model">config.mrp.final.line</field>
                <field name="view_type">form</field>
                <field name="view_mode">tree,form</field>
                <field name="view_id" ref="config_mrp_final_line_tree_view"/>
            </record>
    
    	
            <record model="ir.ui.view" id="config_mrp_line_tree_view">
                <field name="name">config.mrp.line.tree</field>
                <field name="model">config.mrp.line</field>
                <field name="type">tree</field>
                <field name="arch" type="xml">
                    <tree string="Config Lines" editable="bottom">
                        <field name="config_id" invisible="1"/>
                        <field name="product_id"  on_change="onchange_product_id(product_id)"/>
                        <field name="prodlot_id"/>
                        <field name="product_qty"/>
                        <field name="product_uom"/>
                        <field name="shape" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="density" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="size_x" attrs="{'required':[('shape', '=', 'quadrangular')]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="size_y" attrs="{'required':[('shape', '=', 'quadrangular')]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="size_z" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="diameter" attrs="{'required':[('shape', '=', 'cylindrical')]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="weight" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                    </tree>
                </field>
            </record>

            <record model="ir.ui.view" id="config_mrp_line_form_view">
                <field name="name">config.mrp.line.form</field>
                <field name="model">config.mrp.line</field>
                <field name="type">form</field>
                <field name="arch" type="xml">
                    <form string="Config Lines">
                    	<group colspan="4" col="14">
                        <field name="config_id" invisible="1"/>
                        <field name="product_id" on_change="onchange_product_id(product_id)"/>
                        <field name="prodlot_id"/>
                        <field name="product_qty"/>
                        <field name="product_uom"/>
                        <field name="shape" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="density" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        </group>
                        <group colspan="4" col="10">
                        <field name="size_x" attrs="{'required':[('shape', '=', 'quadrangular')], 'invisible':[('shape', 'in', ('other','cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="size_y" attrs="{'required':[('shape', '=', 'quadrangular')],'invisible':[('shape', 'in', ('other','cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="size_z" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))],'invisible':[('shape', '=', 'other')]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="diameter" attrs="{'required':[('shape', '=', 'cylindrical')],'invisible':[('shape', 'in', ('other','quadrangular'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="weight" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))],'invisible':[('shape', '=', 'other')]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        </group>
                    </form>
                </field>
            </record>

            <record model="ir.actions.act_window" id="action_config_mrp_line_tree_view">
                <field name="name">config.mrp.line</field>
                <field name="type">ir.actions.act_window</field>
                <field name="res_model">config.mrp.line</field>
                <field name="view_type">form</field>
                <field name="view_mode">tree,form</field>
                <field name="view_id" ref="config_mrp_line_tree_view"/>
            </record>

           <record model="ir.ui.view" id="config_mrp_tree_view">
                <field name="name">config.mrp.tree</field>
                <field name="model">config.mrp</field>
                <field name="type">tree</field>
                <field name="arch" type="xml">
                    <tree string="Config MRP">
                        <field name="product_id"  on_change="onchange_product_id(product_id)"/>
                        <field name="product_qty"/>
                        <field name="product_uom"/>
                        <field name="shape" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="density" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="size_x" attrs="{'required':[('shape', '=', 'quadrangular')]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="size_y" attrs="{'required':[('shape', '=', 'quadrangular')]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="size_z" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="diameter" attrs="{'required':[('shape', '=', 'cylindrical')]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="weight" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                    </tree>
                </field>
            </record>

            <record model="ir.ui.view" id="config_mrp_form_view">
                <field name="name">config.mrp.form</field>
                <field name="model">config.mrp</field>
                <field name="type">form</field>
                <field name="arch" type="xml">
                    <form string="Config MRP">
                    	<group colspan="4" col="10">
                    	<field name="product_id" on_change="onchange_product_id(product_id)"/>
                        <field name="product_qty"/>
                        <field name="product_uom"/>
                        <field name="shape" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="density" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        </group>
                        <group colspan="4" col="10">
                        <field name="size_x" attrs="{'required':[('shape', '=', 'quadrangular')], 'invisible':[('shape', 'in', ('other','cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="size_y" attrs="{'required':[('shape', '=', 'quadrangular')],'invisible':[('shape', 'in', ('other','cylindrical'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="size_z" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))],'invisible':[('shape', '=', 'other')]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="diameter" attrs="{'required':[('shape', '=', 'cylindrical')],'invisible':[('shape', 'in', ('other','quadrangular'))]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        <field name="weight" attrs="{'required':[('shape', 'in', ('quadrangular', 'cylindrical'))],'invisible':[('shape', '=', 'other')]}" on_change="compute_weight(product_id,size_x, size_y, size_z, shape, density, diameter)"/>
                        </group>
                        <notebook colspan="4">
                        <page string="Products to consume">
                        	<field name="line_ids" colspan="4" nolabel="1"/>
                        </page>
                        <page string="Final Product">
                        	<field name="final_line_ids" colspan="4" nolabel="1"/>
                        </page>
                        
                        </notebook>
                        <newline/>
                        <button special="cancel" string="Cancel" icon="gtk-cancel"/>
                        <button name="button_ok" string="Done" type="object" icon="gtk-ok"/>
                    </form>
                </field>
            </record>

            <record model="ir.actions.act_window" id="action_config_mrp_tree_view">
                <field name="name">config.mrp</field>
                <field name="type">ir.actions.act_window</field>
                <field name="res_model">config.mrp</field>
                <field name="view_type">form</field>
                <field name="view_mode">tree,form</field>
                <field name="view_id" ref="config_mrp_tree_view"/>
            </record>
            
           <act_window name="Reconfigure order"            
            res_model="config.mrp"
            src_model="mrp.production"
            view_mode="form"
            target="new"
            multi="True"        
            key2="client_action_multi"    
            groups="base.group_extended"
            id="action_config_mrp"/>    
                        
    </data>
</openerp>