<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>
		<record id="view_stock_fill_inventory_inh" model="ir.ui.view">
			<field name="name">Import Inventory Inherited</field>
			<field name="model">stock.fill.inventory</field>
			<field name="type">form</field>
			<field name="inherit_id" ref="stock.view_stock_fill_inventory" />
			<field name="arch" type="xml">
				<field name="set_stock_zero" position="after">
					<newline/>
					<field name="categ_id"/>
					<field name="product_id"/>
				</field>
			</field>
		</record>
		
		<record id="view_inventory_form_onchange_inh" model="ir.ui.view">
            <field name="name">stock.inventory.form.onchange</field>
            <field name="model">stock.inventory</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="stock.view_inventory_form"/>
            <field name="arch" type="xml">
            <xpath expr="/form/notebook/page/field[@name='inventory_line_id']/tree/field[@name='product_id']" position="replace">
            	<field context="{location:location_id,uom:product_uom,to_date:parent.date}" name="product_id" on_change="on_change_product_id(location_id,product_id,product_uom,parent.date, prod_lot_id)"  domain="[('type','&lt;&gt;','service')]"/>
            </xpath>
            <xpath expr="/form/notebook/page/field[@name='inventory_line_id']/tree/field[@name='prod_lot_id']" position="replace">
            	<field context="{location:location_id,uom:product_uom,to_date:parent.date}" name="prod_lot_id" on_change="on_change_product_id(location_id,product_id,product_uom,parent.date, prod_lot_id)"/>
            </xpath>
            <!--
            <xpath expr="/form/notebook/page/field[@name='inventory_line_id']/tree/field[@name='state']" position="attributes">
            	<attribute name="invisible">0</attribute>
            </xpath>
            <xpath expr="//form/notebook/page/field[@name='inventory_line_id']//field[@name='prod_lot_id']" position="after">
            	<field name="state"/>
            </xpath>
           -->
            </field>
        </record>
        
        
    	<record id="inventory_line_editable_tree" model="ir.ui.view">
            <field name="name">inventory.line.editable.tree</field>
            <field name="model">stock.inventory.line</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Stock Inventory Lines" editable="top">
                	<field name="inventory_id" attrs="{'readonly':[('state','in',('done', 'cancel','confirm'))]}"/>
                    <field name="product_id" attrs="{'readonly':[('state','in',('done', 'cancel','confirm'))]}"/>
                    <field name="product_qty" attrs="{'readonly':[('state','in',('done', 'cancel','confirm'))]}"/>
                    <field name="product_uom" attrs="{'readonly':[('state','in',('done', 'cancel','confirm'))]}"/>
                    <field name="prod_lot_id" groups="base.group_extended" attrs="{'readonly':[('state','in',('done', 'cancel','confirm'))]}"/>
                    <button name="%(stock.action_view_stock_inventory_line_split)d"
                            string="Split inventory lines" groups="base.group_extended"
                            type="action" icon="gtk-justify-fill"/>
                    <field name="location_id" attrs="{'readonly':[('state','in',('done', 'cancel','confirm'))]}"/>
                	<field name="state"/>
                </tree>
            </field>
        </record>
        
        <record id="view_inventory_line_filter" model="ir.ui.view">
            <field name="name">stock.inventory.line.filter</field>
            <field name="model">stock.inventory.line</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Inventory">
                    <group col="10" colspan="4">
                    	<field name="inventory_id"/>
                        <field name="product_id"/>
                        <field name="prod_lot_id"/>
                        <field name="location_id"/>
                        <field name="product_qty"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By..." colspan="4" col="4" groups="base.group_extended">
                        <filter string="Product" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'product_id'}"/>
                        <filter string="Lot" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'prod_lot_id'}"/>
                        <filter string="Location" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'location_id'}"/>
                        <filter string="Inventory" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'inventory_id'}"/>
                    </group>
                </search>
            </field>
        </record>
	<record id="action_inventory_line" model="ir.actions.act_window">
            <field name="name">Physical Inventories Lines</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.inventory.line</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="inventory_line_editable_tree"/>
            <field name="search_view_id" ref="view_inventory_line_filter"/>
        </record>    
    
    	<menuitem id="menu_inventory_line" name="Inventory Lines" parent="stock.menu_stock_inventory_control" action="action_inventory_line"/>

	</data>
</openerp>
