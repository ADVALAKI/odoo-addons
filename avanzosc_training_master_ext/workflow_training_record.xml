<?xml version="1.0"?>
<openerp>
	<data>
		
		# -----------------------------------------------------------
		# Workflow (o la definición de la "entidad")
		# -----------------------------------------------------------
	
		<record model="workflow" id="wkf_record">
			<field name="name">training.record.basic</field> <!-- Nombre del workflow -->
			<field name="osv">training.record</field> <!-- El workflow estará asociado a este modelo (objeto) -->
			<field name="on_create">True</field> <!-- Para que el workflow se cree cuando se crea el objeto -->
		</record>
		
		# -----------------------------------------------------------
		# Activities (o estados del workflow)
		# -----------------------------------------------------------
		
		<record model="workflow.activity" id="opened_record">
			<field name="wkf_id" ref="wkf_record" /> <!-- Referencia a la "entidad" de la que pertenece el estado -->
			<field name="flow_start">True</field> <!-- Indica que es un estado de inicio -->
			<field name="name">opened</field> <!-- Nombre del estado -->
			<field name="kind">function</field> <!-- Puede ser también "Dummy" (no hace nada) -->
			<field name="action">action_open()</field> <!-- Definición de la función que se va ha ejecutar cuando un objeto llegue ha este estado -->
		</record>
		
		<record model="workflow.activity" id="pending_record">
			<field name="wkf_id" ref="wkf_record" />
			<field name="name">pending</field>
			<field name="kind">function</field>
			<field name="action">action_pending()</field>
		</record>
		
		<record model="workflow.activity" id="solicited_record">
			<field name="wkf_id" ref="wkf_record" />
			<field name="name">solicited</field>
			<field name="kind">function</field>
			<field name="action">action_request()</field>
		</record>
		
		<record model="workflow.activity" id="sent_ministry_record">
			<field name="wkf_id" ref="wkf_record" />
			<field name="name">sent_to_ministry</field>
			<field name="kind">function</field>
			<field name="action">action_send_ministry()</field>
		</record>
		
		<record model="workflow.activity" id="print_pending_record">
			<field name="wkf_id" ref="wkf_record" />
			<field name="name">print_pending</field>
			<field name="kind">function</field>
			<field name="action">action_print_pending()</field>
		</record>
    	
    	<record model="workflow.activity" id="sent_print_record">
			<field name="wkf_id" ref="wkf_record" />
			<field name="name">sent_to_print</field>
			<field name="kind">function</field>
			<field name="action">action_sent_print()</field>
		</record>
    	
    	<record model="workflow.activity" id="ready_receive_record">
			<field name="wkf_id" ref="wkf_record" />
			<field name="name">ready_to_receive</field>
			<field name="kind">function</field>
			<field name="action">action_ready()</field>
		</record>
    	
    	<record model="workflow.activity" id="received_record">
			<field name="wkf_id" ref="wkf_record" />
			<field name="name">received</field>
			<field name="kind">function</field>
			<field name="action">action_receive()</field>
		</record>
		
		<record model="workflow.activity" id="closed_record">
			<field name="wkf_id" ref="wkf_record" />
			<field name="flow_stop">True</field>
			<field name="name">closed</field>
			<field name="kind">function</field>
			<field name="action">action_close()</field>
		</record>

		# -----------------------------------------------------------
		# Transitions (transiciones)
		# -----------------------------------------------------------
		
		<record model="workflow.transition" id="trans_opened_pending">
			<field name="act_from" ref="opened_record" /> <!-- Estado de origen -->
			<field name="act_to" ref="pending_record" /> <!-- Estado de destino -->
			<field name="signal">button_pending</field> <!-- Nombre de la señal para pasar la transición -->
		</record>
		
		<record model="workflow.transition" id="trans_pending_solicited">
			<field name="act_from" ref="pending_record" />
			<field name="act_to" ref="solicited_record" />
			<field name="signal">button_request</field>
		</record>
		
		<record model="workflow.transition" id="trans_solicited_sent_to_ministry">
			<field name="act_from" ref="solicited_record" />
			<field name="act_to" ref="sent_ministry_record" />
			<field name="signal">button_sent_ministry</field>
		</record>
		
		<record model="workflow.transition" id="trans_sent_to_ministry_print_pending">
			<field name="act_from" ref="sent_ministry_record" />
			<field name="act_to" ref="print_pending_record" />
			<field name="signal">button_print_pending</field>
		</record>
		
		<record model="workflow.transition" id="trans_print_pending_sent_print">
			<field name="act_from" ref="print_pending_record" />
			<field name="act_to" ref="sent_print_record" />
			<field name="signal">button_sent_print</field>
		</record>
		
		<record model="workflow.transition" id="trans_sent_print_ready_receive">
			<field name="act_from" ref="sent_print_record" />
			<field name="act_to" ref="ready_receive_record" />
			<field name="signal">button_ready</field>
		</record>
		
		<record model="workflow.transition" id="trans_ready_receive_received">
			<field name="act_from" ref="ready_receive_record" />
			<field name="act_to" ref="received_record" />
			<field name="signal">button_receive</field>
		</record>
		
		<record model="workflow.transition" id="trans_received_closed">
			<field name="act_from" ref="received_record" />
			<field name="act_to" ref="closed_record" />
			<field name="signal">button_close</field>
		</record>
	</data>	
</openerp>		