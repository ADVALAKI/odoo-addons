<?xml version="1.0"?>
<openerp>
	<data>
		
		# -----------------------------------------------------------
		# Workflow (o la definición de la "entidad")
		# -----------------------------------------------------------
	
		<record model="workflow" id="wkf_practice">
			<field name="name">training.practice</field> <!-- Nombre del workflow -->
			<field name="osv">practice</field> <!-- El workflow estará asociado a este modelo (objeto) -->
			<field name="on_create">True</field> <!-- Para que el workflow se cree cuando se crea el objeto -->
		</record>
		
		# -----------------------------------------------------------
		# Activities (o estados del workflow)
		# -----------------------------------------------------------
		
		<record model="workflow.activity" id="draft_practice">
			<field name="wkf_id" ref="wkf_practice" /> <!-- Referencia a la "entidad" de la que pertenece el estado -->
			<field name="flow_start">True</field> <!-- Indica que es un estado de inicio -->
			<field name="name">draft</field> <!-- Nombre del estado -->
			<field name="kind">function</field> <!-- Puede ser también "Dummy" (no hace nada) -->
			<field name="action">action_draft()</field> <!-- Definición de la función que se va a ejecutar cuando un objeto llegue a este estado -->
		</record>
		
		<record model="workflow.activity" id="accepted_practice">
			<field name="wkf_id" ref="wkf_practice" />
			<field name="name">accepted</field>
			<field name="kind">function</field>
			<field name="action">action_accept()</field>
		</record>
		
		<record model="workflow.activity" id="refused_practice">
			<field name="wkf_id" ref="wkf_practice" />
			<field name="name">refused</field>
			<field name="kind">function</field>
			<field name="action">action_refuse()</field>
		</record>
		
		<record model="workflow.activity" id="completed_practice">
			<field name="wkf_id" ref="wkf_practice" />
			<field name="name">completed</field>
			<field name="kind">function</field>
			<field name="action">action_complete()</field>
		</record>

		# -----------------------------------------------------------
		# Transitions (transiciones)
		# -----------------------------------------------------------
		
		<record model="workflow.transition" id="trans_practice_draft_accepted">
			<field name="act_from" ref="draft_practice" /> <!-- Estado de origen -->
			<field name="act_to" ref="accepted_practice" /> <!-- Estado de destino -->
			<field name="signal">button_accept</field> <!-- Nombre de la señal para pasar la transición -->
		</record>
		
		<record model="workflow.transition" id="trans_practice_draft_refused">
			<field name="act_from" ref="draft_practice" /> <!-- Estado de origen -->
			<field name="act_to" ref="refused_practice" /> <!-- Estado de destino -->
			<field name="signal">button_refuse</field> <!-- Nombre de la señal para pasar la transición -->
		</record>
		
		<record model="workflow.transition" id="trans_practice_accepted_completed">
			<field name="act_from" ref="accepted_practice" />
			<field name="act_to" ref="completed_practice" />
			<field name="signal">button_complete</field>
		</record>
		
		<record model="workflow.transition" id="trans_practice_completed_draft">
			<field name="act_from" ref="completed_practice" />
			<field name="act_to" ref="draft_practice" />
			<field name="signal">button_draft</field>
		</record>
		
		<record model="workflow.transition" id="trans_practice_refused_draft">
			<field name="act_from" ref="refused_practice" />
			<field name="act_to" ref="draft_practice" />
			<field name="signal">button_draft</field>
		</record>
		
	</data>	
</openerp>		